---

layout: post_layout
title: 学习TCP/ IP协议采用4层结构
time: 2019年08月26日 星期一
location: 北京
pulished: true
excerpt_separator: "```"
typora-root-url: images
typora-copy-images-to: images
---

- 应用层：定义数据格式并按照对应的格式解读数据

- 传输层:定义端口，标识应用程序身份，实现端口到端口的通信，TCP协议可以保证数据传输的可靠性。

  - UDP协议：定义端口
    - 数据包有首部和数据组成
      - 首部包括源端口和目标端口
      - 数据最大为65527个字节
    - 缺点没确认机制，无法确认是否收到
  - TCP协议：有确认机制的UDP协议，面向连接的、可靠地、基于字节流的通信协议。
    - 缺点实现过程复杂，消耗连接资源多，传输速度慢。
    - TCP数据包没有长度限制，但保证网络效率，一般不超过IP数据包的长度。

- 网络层：定义网路地址，区分两段，子网内MAC寻址，对于不同子网的数据包进行路由

  - 分别是IP协议、ARP协议、路由协议
    - IP协议：如果两个IP地址在同一个子网内，则网络地址相同，IP地址和子网掩码按位与运算得到网络地址
    - ARP协议：根据IP地址获取mac地址，通过广播在同一子网内获得
    - 路由协议：通过本子网的网关进行路由，转发到目标IP所在的子网中，然后通过ARP获取目标机MAC，最终通过广播形式将数据包发送给接收方。

- 链路层

  - 对电信号进行分组并形成具有特定意义的数据帧，然后以广播的形式通过物理介质发送给接受方。
  - 数据帧由：首部、数据、尾部
    - 首部：包含目标MAC地址，源MAC地址和类型
    - 尾部：数据帧校验序列

  - **链路层**：对0和1进行分组，定义数据帧，确认主机的物理地址，传输数据；
  - **网络层**：定义IP地址，确认主机所在的网络位置，并通过IP进行MAC寻址，对外网数据包进行路由转发；
  - **传输层**：定义端口，确认主机上应用程序的身份，并将数据包交给对应的应用程序；
  - **应用层**：定义数据格式，并按照对应的格式解读数据。
  - 当你输入一个网址并按下回车键的时候，首先，应用层协议对该请求包做了格式定义；紧接着传输层协议加上了双方的端口号，确认了双方通信的应用程序；然后网络协议加上了双方的IP地址，确认了双方的网络位置；最后链路层协议加上了双方的MAC地址，确认了双方的物理位置，同时将数据进行分组，形成数据帧，采用广播方式，通过传输介质发送给对方主机。而对于不同网段，该数据包首先会转发给网关路由器，经过多次转发后，最终被发送到目标主机。目标机接收到数据包后，采用对应的协议，对帧数据进行组装，然后再通过一层一层的协议进行解析，最终被应用层的协议解析并交给服务器处理。

  - Socket:是一种“打开-读/写-关闭”模式的实现，服务器和客户端各自维护一个“文件”，在建立连接打开后，可以想自己文件写入内容供对方读取或者读取对方内容，通讯结束时关闭文件。
  - process.argv属性
    - process.argv[0]--返回启动Node.js进程的可执行文件所在的绝对路径
    - process.argv[1]--为当前执行的JavaScript文件路径

- HTML指的是超文本标记语言